(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64bb1eae"],{5145:function(t,e,n){"use strict";(function(t){var i=n("6249"),o=n.n(i),a=n("db6e"),s=n.n(a),r=n("2f62"),c=n("e015"),l=n("bc3a"),u=n.n(l),d=n("99e5"),m=n.n(d),h=n("5f71");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e["a"]={name:"Home",components:{},data:function(){return{web3:{},usdtContractInstant:{},tokenContractInstant:{},daoTokenContractInstant:{},decimalnum:18,maxSupply:0,totalSupply:0,salePrice:0,auctionPrice:0,mintNum:1,btn_text:"MINT",isinit:!1,whitelistnum:0,whitelist1:{},merkleTree1:{},proof1:[],mission_claim_msg:"",mintable:!1}},computed:g({},Object(r["b"])(["walletAddr"])),watch:{whitelistnum:function(t,e){console.log(t+"-"+e),1==t&&this.claim()}},mounted:function(){var t=this;t.whitelistnum=0,t.isinit=!1,c["a"].$on("message",(function(e){console.log("wallet connected...."),t.pageInit()})),t.pageInit()},methods:{pageInit:function(){var t=this;t.isinit||t.initWeb3Instant((function(){t.loadAllWhitelistFile(),""!=t.getCurrentWalletAddr()&&(t.isinit=!0),t.getSalePrice(),t.getMaxSupply(),t.getTotalSupply()}))},loadWhitelist:function(t,e){u.a.get(t).then((function(t){200==t.status&&e(t.data)}))},initWeb3Instant:function(t){this.web3=new m.a(window.web3.currentProvider),this.daoTokenContractInstant=new this.web3.eth.Contract(h["a"].DAO_TOKEN_CONTRACT.ABI,h["a"].DAO_TOKEN_CONTRACT.ADDRESS),t&&t()},getCurrentWalletAddr:function(){var t=this.$store.getters.walletAddr;return""==t?this.$Message.info({content:"请先连接钱包！"}):t},generateLeaf:function(e){var n=t.from(o()(e),"hex");return console.log(n),n},getMerkletree:function(t,e){var n=this,i=n[e].airdrop.map((function(t){return o()(t)}));console.log(i),n[t]=new s.a(i,o.a,{sortPairs:!0})},getAmountByAddr:function(t,e){var n=this;return console.log("-----addr:"+t),console.log(n[e].airdrop[1]),n[e].airdrop.indexOf(t)>-1},getProof:function(t,e){var n=this,i=[],o=this.getAmountByAddr(n.getCurrentWalletAddr(),e);if("undefined"!=typeof o&&o>0){var a=n.generateLeaf(n.getCurrentWalletAddr());i=n[t].getHexProof(a),console.log(i)}return i},hasClaimed:function(t){return this.daoTokenContractInstant.methods.hasClaimed(t).call()},hasMintedPresale:function(t){return this.daoTokenContractInstant.methods.hasMintedPresale(t).call()},getSalePrice:function(){var t=this;t.daoTokenContractInstant.methods.getSalePrice().call().then((function(e){t.salePrice=e/Math.pow(10,t.decimalnum)}))},getAuctionPrice:function(){var t=this;t.daoTokenContractInstant.methods.getAuctionPrice().call().then((function(e){t.auctionPrice=e/Math.pow(10,t.decimalnum)}))},isPresaleActive:function(){return this.daoTokenContractInstant.methods.isPresaleActive().call()},isPublicSaleActive:function(){return this.daoTokenContractInstant.methods.isPublicSaleActive().call()},isAuctionActive:function(){return this.daoTokenContractInstant.methods.isAuctionActive().call()},getMaxSupply:function(){var t=this;t.daoTokenContractInstant.methods.MAX_SUPPLY().call().then((function(e){console.log("sup:"+e),t.maxSupply=e}))},getTotalSupply:function(){var t=this;t.daoTokenContractInstant.methods.totalSupply().call().then((function(e){t.totalSupply=e}))},isInWhiteList:function(t){var e=this,n=e.getAmountByAddr(this.getCurrentWalletAddr(),t);return n},loadWhitelistByName:function(t){var e=this,n="static/whitelist"+t+".json?t="+Math.random(),i="whitelist"+t;e.loadWhitelist(n,(function(t){e[i]=t,e.whitelistnum=e.whitelistnum+1}))},buildMerkleTree:function(t){var e=this;e.op_msg="loading...";var n="merkleTree"+t,i="whitelist"+t,o="static/whitelist"+t+".json";Object.keys(e[i]).length>0?(e.getMerkletree(n,i),console.log(e[n].getHexRoot())):e.loadWhitelist(o,(function(t){e[i]=t,e.getMerkletree(n,i),console.log(e[n].getHexRoot())})),e.op_msg=""},loadAllWhitelistFile:function(){var t=this;t.whitelistnum=0,t.loadWhitelistByName("1")},getWhiteListIndex:function(){for(var t=this,e=0,n=1;n<6;n++)if(t.isInWhiteList("whitelist"+n)){e=n;break}return e},checkIsInMissionRound:function(){var t=this;return t.isInWhiteList("whitelist1")},doMint:function(){var t=this;t.doPresaleMint()},claim:function(){var t=this,e=t.checkIsInMissionRound();console.log("----------------b1:"+e),e?(t.mintable=!0,t.hasMintedPresale(t.getCurrentWalletAddr()).then((function(e){e?t.mission_claim_msg=t.$t("claim.claimed"):(t.mission_claim_msg=t.$t("claim.claimable"),t.buildMerkleTree("1"),t.showMissionClaimForm=!0,t.show_btn_missionclaim=!0)}))):(t.mintable=!1,""!=t.getCurrentWalletAddr()?t.mission_claim_msg=t.$t("claim.noteligible"):t.mission_claim_msg=t.$t("claim.loading"))},doPresaleMint:function(){var t=this,e="1",n="merkleTree"+e,i="whitelist"+e;this.daoTokenContractInstant.methods.getSalePrice().call().then((function(e){var o={from:t.getCurrentWalletAddr(),value:e+""},a=t.getProof(n,i);t.daoTokenContractInstant.methods.presaleMint(a).send(o).on("transactionHash",(function(e){t.$Message.loading({content:t.$t("claim.claiming"),duration:0,background:!0})})).then((function(e){t.$Message.destroy(),t.$Message.success({content:t.$t("claim.claimok"),onClose:function(){t.$router.go(0)}})})).catch((function(e){t.$Message.destroy(),t.$Message.error({content:t.$t("claim.claimfail")})}))}))},doAuctionMint:function(){var t=this;this.daoTokenContractInstant.methods.getAuctionPrice().call().then((function(e){var n={from:t.getCurrentWalletAddr(),value:e+""};t.daoTokenContractInstant.methods.auctionMint(1).send(n).on("transactionHash",(function(e){t.$Message.loading({content:t.$t("claim.claiming"),duration:0,background:!0})})).then((function(e){t.$Message.destroy(),t.$Message.success({content:t.$t("claim.claimok"),onClose:function(){t.$router.go(0)}})})).catch((function(e){t.$Message.destroy(),t.$Message.error({content:t.$t("claim.claimfail")})}))}))},queryUsdtBalance:function(t){var e=this,n=e.getCurrentWalletAddr();e.usdtContractInstant.methods.balanceOf(n).call((function(e,n){var i=(parseFloat(n)/Math.pow(10,18)).toFixed(4);t(i)}))},getDecimals:function(t){var e=this;e.tokenContractInstant.methods.decimals().call((function(e,n){t(n)}))},copyContractAddress:function(){var t=this,e=this,n=new e.$Clipboard("#btn_copy_addr");n.on("success",(function(e){t.$Message.success({content:"copy success"}),n.destroy()})),n.on("error",(function(e){t.$Message.error({content:"copy fail"}),n.destroy()}))},opentWithBlank:function(t,e){var n=document.createElement("a");n.setAttribute("href",t),e=e||"_blank",n.setAttribute("target",e),document.body.append(n),n.click(),document.body.removeChild(n)}},beforeDestroy:function(){}}}).call(this,n("b639").Buffer)},5780:function(t,e,n){t.exports=n.p+"img/pic005.0250086f.png"},"633e":function(t,e,n){},"876b":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("div",{staticClass:"mintform"},[t._m(0),n("div",{staticClass:"mintbox"},[n("div",{staticClass:"box_tit"},[t._v("NFT铸造(预售轮)")]),n("div",{staticClass:"box_tr"},[t._v("当前铸造/总量: "),n("b",[t._v(t._s(t.totalSupply)+"/"+t._s(t.maxSupply))])]),n("div",{staticClass:"box_tr"},[t._v("铸造价格: "+t._s(t.salePrice)+"ETH")]),n("div",{staticClass:"box_tr"},[n("InputNumber",{attrs:{"controls-outside":""},model:{value:t.mintNum,callback:function(e){t.mintNum=e},expression:"mintNum"}})],1),n("div",{staticClass:"box_tr"},[n("button",{class:["btn_conn",t.mintable?"":"btn_enable1"],attrs:{disabled:!t.mintable},on:{click:t.doMint}},[t._v(t._s(t.btn_text))])]),n("div",{staticClass:"box_tr"},[n("div",{staticClass:"tips"},[t._v(t._s(t.mission_claim_msg))])])]),t._m(1)])])},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"leftimg"},[i("img",{attrs:{src:n("e2c7")}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rightimg"},[i("img",{attrs:{src:n("5780")}})])}],a=n("5145"),s=a["a"],r=(n("ce66"),n("2877")),c=Object(r["a"])(s,i,o,!1,null,"1c0c2df8",null);e["default"]=c.exports},ce66:function(t,e,n){"use strict";n("633e")},e2c7:function(t,e,n){t.exports=n.p+"img/pic001.1b76c6fa.png"}}]);
//# sourceMappingURL=chunk-64bb1eae.1654114233713.js.map